# Default values for boltbase
# Boltbase requires a shared filesystem (ReadWriteMany) for state persistence

# Image configuration
image:
  repository: ghcr.io/dagu-org/boltbase
  tag: latest
  pullPolicy: IfNotPresent

# Scheduler configuration
scheduler:
  replicas: 1
  resources:
    requests:
      memory: "256Mi"
      cpu: "250m"
    limits:
      memory: "512Mi"
      cpu: "500m"

# Coordinator configuration (gRPC server for distributed task execution)
coordinator:
  replicas: 1
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"

# Worker pool configuration
# Each pool creates a separate Kubernetes Deployment.
# Pool names become part of the Deployment name: <release>-boltbase-worker-<poolName>
workerPools:
  general:
    replicas: 2
    labels: {}
    resources:
      requests:
        memory: "128Mi"
        cpu: "100m"
      limits:
        memory: "256Mi"
        cpu: "200m"
    nodeSelector: {}
    tolerations: []
    affinity: {}

# UI configuration
ui:
  replicas: 1
  service:
    port: 8080
  resources:
    requests:
      memory: "256Mi"
      cpu: "250m"
    limits:
      memory: "512Mi"
      cpu: "500m"

# Authentication configuration
auth:
  mode: "builtin"  # Options: "none", "builtin", "oidc"
  builtin:
    admin:
      username: "admin"
      password: "adminpass"  # CHANGEME
    token:
      secret: "boltbase-secret-key"  # CHANGEME
      ttl: "24h"

# Persistence - REQUIRED: Boltbase needs a shared filesystem (RWX)
# Use NFS, EFS, CephFS, or similar storage that supports ReadWriteMany
persistence:
  enabled: true
  accessMode: ReadWriteMany
  size: 10Gi
  # Set this to your storage class that supports RWX
  # Example: "nfs-client", "efs-sc", "cephfs"
  storageClass: ""
  # Skip RWX validation for local testing (Kind, Docker Desktop)
  skipValidation: false
